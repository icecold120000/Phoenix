{% extends 'base.html.twig' %}

{% block title %}{{ project.nameProject }}{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('project') }}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('project') }}
{% endblock %}
{% block body %}
    <h1 class="my-project" data-project-id="{{ project.id }}"
        data-project-descrip="{{ project.descriptionProject }}">{{ project.nameProject }}</h1>
    <p>Commencé le : {{ project.startedAt ? project.startedAt|date('d/m/Y') : '' }}</p>
    <p>Terminé le : {{ project.endedAt ? project.endedAt|date('d/m/Y') : '' }}</p>
    <p>Statut : <span style="color: {{ project.status.colorStatus }}">
            {{ project.status.name }}</span>
    </p>
    <p>Équipe projet : {{ project.productionTeam.teamName }}</p>
    <p>Équipe client : {{ project.teamClient.teamName }}</p>
    <p>Budget : {{ project.projectBudget.initialBudget }}€</p>
    <p>Description{{ project.descriptionProject }}</p>
    <div>
        <div>
            <h2>Faits Marquant :</h2>
            <table class="table tableAdmin">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Jalon</th>
                    </tr>
                </thead>
                <tbody>
                    {% for fact in facts %}
                        <tr>
                            <td>{{ fact.dateFact ? fact.dateFact|date('d/m/Y h:m') : '' }}</td>
                            <td>{{ fact.nameFact }}</td>
                            <td>{{ fact.descriptionFact }}</td>
                            <td>{{ fact.milestoneFact.nameMilestone }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="4" class="erreur">Aucun fait n'a été trouvé</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div>
            <h2>Risques :</h2>
            <table class="table tableAdmin">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Date d’identification</th>
                        <th>Date de résolution</th>
                        <th>Sévérité</th>
                        <th>Probabilité</th>
                    </tr>
                </thead>
                <tbody>
                    {% for risk in risks %}
                        <tr>
                            <td>{{ risk.nameRisk }}</td>
                            <td>
                                {{ risk.identificationDateRisk ?
                                risk.identificationDateRisk|date('d/m/Y') : '' }}
                            </td>
                            <td>
                                {{ risk.resolutionDateRisk ?
                                risk.resolutionDateRisk|date('d/m/Y') : '' }}
                            </td>
                            <td>{{ risk.severityRisk }}</td>
                            <td>{{ risk.probabilityRisk }}%</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="5" class="erreur">Aucun risque n'a été trouvé</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

{% endblock %}